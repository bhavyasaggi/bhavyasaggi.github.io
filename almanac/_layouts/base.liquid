<!doctype html>
{% if redirect %}
  <html lang="{{- language -}}">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>
        Redirect
      </title>
      <meta name="description" content="Redirecting to secondary location">
      <meta name="robots" content="noindex">
      <meta http-equiv="refresh" content="0; URL='{{ redirect }}'"/>
    </head>
    <body>
      Redirecting to
      <a href="{{ redirect }}" rel="nofollow">
        {{- redirect -}}
      </a>
    </body>
  </html>
{% else %}
  <html lang="{{- language -}}">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>
        {{- title -}}
      </title>
      <meta name="description" content="{{- description -}}">
      {%- if eleventyNoIndex -%}
        <meta name="robots" content="noindex">
      {%- endif -%}
      <link rel="canonical" href="{{- page.url -}}">
      <link href="/css/purecss-base.min.css" rel="stylesheet">
      <link href="/css/purecss-grids.min.css" rel="stylesheet">
      <link href="/css/purecss-grids-responsive.min.css" rel="stylesheet">
      <style>
        {%- include "css/index.css" - %}
      </style>
      <script>
        if ('scrollRestoration' in history) {
          history.scrollRestoration = 'manual';
        }
        function toggleTheme() {
          const isDark = document.getElementById('switch-theme').checked
            ? 1
            : 0;
          document.body.dataset.themeDark = isDark;
        }
      </script>
    </head>
    <body data-theme-dark="0" class="box-reset shade">
      <header class="stack p-2 shade-dark">
        <a class="shade-dark" href="/">&nlt;&nbsp;bhavyasaggi.github.io</a>
        <label class="box-reset d-sm-none ms-auto shade-dark cursor-pointer">
          <input id="switch-theme" onclick="toggleTheme()" type="checkbox" hidden class="box-reset shade-dark"/>
          <span class="shade" aria-label="Toggle Theme"></span>
        </label>
      </header>

      {%- assign nav_items = collections.all | eleventyNavigation: eleventyBuildId -%}
      {%- assign nav_path = nav_items | eleventyNavigationPath: page.url -%}
      {%- assign nav_item = nav_path | last -%}
      {%- assign toc_items = content | eleventyTOC  -%}
      <div class="pure-g">
        <nav class="be-1 p-1 d-md-none pure-u-1 pure-u-md-1-3 pure-u-xl-6-24 shade-light">
          {%- render 'partials/navigation.liquid', nav_items: nav_items, nav_root: true, page_url: page.url -%}
        </nav>
        <div class="p-1 pure-u-1 pure-u-md-2-3 pure-u-xl-14-24">
          {%- render 'partials/navigation-breadcrumbs.liquid', nav_items: nav_path -%}
          <main id="main">
            <div class="m-0 b-0 p-0 min-vh-100">
              {{- content -}}
            </div>
          </main>
          <hr/>
          <section>
            <header>
              Keep Reading...
            </header>
            <br/>
            {%- render 'partials/navigation-list.liquid', nav_items: nav_item.children -%}
            {%- render 'partials/navigation-prevnext.liquid', nav_item: nav_item -%}
            <footer class="stack">
              <strong class="ms-auto">
                Date:&nbsp;
              </strong>
              <time datetime="{{ page.date }}">
                {{- page.date | date: "%Y-%m-%d" -}}
              </time>
            </footer>
          </section>
        </div>
        <aside class="bs-1 p-1 d-xl-none pure-u-1 pure-u-xl-4-24">
          {%- render 'partials/navigation-toc.liquid' with toc_items as nav_items -%}
        </aside>
      </div>

      <footer class="p-2 text-center shade-dark">
        <mark class="text-monospace">
          {{- eleventyBuildId -}}
          &nbsp;Â©&nbsp;
          {{- "now" | date: '%Y' -}}
        </mark>
      </footer>
    </body>
  </html>
{%- endif -%}
